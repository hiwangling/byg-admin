(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"21af":function(t,e,i){},"29e9":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"drag",rawName:"v-drag"}],staticClass:"box",style:{top:t.child.top+"px",left:t.child.left+"px",width:t.child.width+"px","text-align":"left"},attrs:{contenteditable:!0},domProps:{innerHTML:t._s(t.innerText)},on:{input:t.changeTxt,focus:function(e){t.lock=!0},blur:function(e){t.lock=!1}}})},a=[],s={directives:{drag:{bind:function(t){var e=t;e.onmousedown=function(t){var i=t.clientX-e.offsetLeft,n=t.clientY-e.offsetTop;document.onmousemove=function(t){var a=t.clientX-i,s=t.clientY-n;window.positionX=s,window.positionY=a,e.style.left=a+"px",e.style.top=s+"px"},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}}}}},props:{child:{type:Object,required:!0}},data:function(){return{innerText:this.child.t,lock:!1}},watch:{child:{handler:function(t,e){this.lock||(this.innerText=this.child.t)},deep:!0}},methods:{changeTxt:function(t){this.child.t=this.$el.innerHTML}}},o=s,c=(i("a977"),i("2877")),r=Object(c["a"])(o,n,a,!1,null,"2abe336d",null);e["a"]=r.exports},"2dcb":function(t,e,i){"use strict";var n=i("21af"),a=i.n(n);a.a},"333d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[i("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},a=[],s=(i("c5f6"),i("09f4")),o={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&Object(s["a"])(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&Object(s["a"])(0,800)}}},c=o,r=(i("e498"),i("2877")),l=Object(r["a"])(c,n,a,!1,null,"6af373ef",null);e["a"]=l.exports},"66d5":function(t,e,i){},"6fa7":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-tabs",{attrs:{"tab-position":"top"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t._l(t.tab,function(e,n){return i("el-tab-pane",{key:n,attrs:{label:e.label,name:e.label}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"sellTable",refInFor:!0,staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{border:"","highlight-current-row":"",data:e.list,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{prop:"title",align:"center",label:"服务名称",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"price",align:"center",label:"服务价格","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[[i("el-input",{staticClass:"edit-input",staticStyle:{width:"80px"},attrs:{size:"mini"},on:{blur:function(e){return t.confirmEdit(n)},focus:function(e){return t.confirmFocus(n)}},model:{value:n.price,callback:function(e){t.$set(n,"price",e)},expression:"row.price"}}),t._v(" "),i("el-input-number",{attrs:{min:1,max:1e3,label:"",size:"mini"},on:{change:function(e){return t.handleChange(n)}},model:{value:n.number,callback:function(e){t.$set(n,"number",e)},expression:"row.number"}}),t._v(" "),1==n.performance?i("el-button",{attrs:{size:"mini",type:"info",plain:""},on:{click:function(e){return t.info(n)}}},[t._v("请选择")]):t._e()]]}}],null,!0)}),t._v(" "),i("el-table-column",{attrs:{prop:"task",align:"center",label:"备注",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("el-input",{staticClass:"edit-input",staticStyle:{width:"80px"},attrs:{size:"mini"},model:{value:n.task,callback:function(e){t.$set(n,"task",e)},expression:"row.task"}})]}}],null,!0)})],1),t._v(" "),i("div",{staticClass:"el-divider el-divider--horizontal"},[i("div",{staticClass:"el-divider__text is-left"},[t._v("已选项目")])]),t._v(" "),i("el-table",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{"show-header":!1,"show-summary":"",data:e.sells}},[i("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"title",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{type:"number",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"totalprice"}})],1)],1)}),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{"show-header":!1,"show-summary":"",data:t.sell}},[i("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"title",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{type:"number",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"totalprice"}})],1)],2),t._v(" "),i("el-dialog",{attrs:{"close-on-click-modal":!1,title:"人员列表",visible:t.dialogFormVisible,"append-to-body":""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-checkbox-group",{model:{value:t.setServer,callback:function(e){t.setServer=e},expression:"setServer"}},t._l(t.getservice,function(e,n){return i("el-checkbox",{key:n,staticStyle:{width:"150px"},attrs:{label:e.id}},[t._v(t._s(e.realname)+"("+t._s(e.branch_name)+")")])}),1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateData()}}},[t._v("确定")])],1)],1)],1)},a=[],s=(i("7514"),i("ac6a"),i("96cf"),i("3b8d")),o=i("fbb8"),c={data:function(){return{dialogFormVisible:!1,activeName:"",listLoading:!1,sell:[],setServer:[],editFlag:!1,getservice:[],editRow:[],list:null,clear:0,row:null,num:1,tab:[],index:0,sum_price:0,price:0,service:[]}},watch:{sell:{handler:function(){this.changeSell()},immediate:!0},setServer:{handler:function(){this.changeprice()},immediate:!1}},created:function(){},methods:{getList:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.init(),this.$nextTick(Object(s["a"])(regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<e.tab.length)){t.next=14;break}if(0!=e.clear){t.next=7;break}e.$refs.sellTable[i].clearSelection(),e.init(),t.next=11;break;case 7:return t.next=9,e.edit(i);case 9:return t.next=11,e.edit(0);case 11:i++,t.next=1;break;case 14:case"end":return t.stop()}},t)})));case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleChange:function(t){t.totalprice=t.number*t.price,this.changeSell()},handleClick:function(t,e){this.index=t.index},init:function(){var t=this,e=[];null!=this.list&&(this.activeName=this.list[0].title?this.list[0].title:"",this.list.map(function(i){i.services.map(function(e){t.$set(e,"number",1),t.$set(e,"inlet",null),t.$set(e,"task",""),t.$set(e,"totalprice",e.price)}),6==i.key&&i.services.map(function(e){t.$set(e,"info",!0)}),e.push({label:i.title,list:i.services,sells:[]})})),this.tab=e},edit:function(t){var e=this;this.index=t,this.$nextTick(function(){e.$refs.sellTable[t].clearSelection(),e.service.forEach(function(i,n){var a=[];a=i.services,a.forEach(function(i){e.$refs.sellTable[t].data.forEach(function(t){for(var e in t)t.id==i.sid&&(t.tid=i.tid,t.price=i.price,t.number=i.number,t.inlet=i.inlet,t.state=i.state,t.task=i.task,t.totalprice=i.totalprice,t.perforname=i.perforname)}),e.$refs.sellTable[t].toggleRowSelection(e.$refs.sellTable[t].data.find(function(t){return t.id===i.sid}),!0)})})})},showService:function(t){this.clear=t.type,this.list=t.server,this.getList()},info:function(t){var e=this;this.dialogFormVisible=!0;var i=[];Object(o["a"])().then(function(n){e.getservice=n.data,0==e.clear?n.data.forEach(function(t){i.push(t.id)}):(i=t.perforname?t.perforname:[],e.setServer=i),e.row=t,e.$forceUpdate()})},updateData:function(){this.dialogFormVisible=!1,this.confirmEdit(this.row)},editService:function(t){this.getList(),this.service=t},confirmEdit:function(t){this.changeSell(),this.handleChange(t),this.$refs.sellTable[this.index].toggleRowSelection(t,!0)},confirmFocus:function(t){},changeSell:function(){var t=0;this.sell&&this.sell.forEach(function(e,i){t+=parseInt(e.totalprice)}),this.sum_price=t;var e={services_totalprice:this.sum_price,service:this.sell};this.$emit("service_data",e)},changeprice:function(t){this.row.perforname=this.setServer},handleSelectionChange:function(t){var e=this;this.tab[this.index].sells=t.filter(function(t){return void 0!=t});var i=[];this.tab.forEach(function(t,n){i.push(e.tab[n].sells)}),i=[].concat.apply([],i),this.sell=i}}},r=c,l=i("2877"),u=Object(l["a"])(r,n,a,!1,null,null,null);e["a"]=u.exports},7456:function(t,e,i){},a977:function(t,e,i){"use strict";var n=i("66d5"),a=i.n(n);a.a},d359:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"signatureBox"},[i("div",{ref:"canvasHW",staticClass:"canvasBox"},[i("canvas",{ref:"canvasF",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd,mousedown:t.mouseDown,mousemove:t.mouseMove,mouseup:t.mouseUp}}),t._v(" "),i("div",{staticClass:"btnBox",staticStyle:{"text-align":"right","margin-right":"20px"}},[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.overwrite}},[t._v("重写")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.send}},[t._v("确定")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:t.cancel}},[t._v("取消")])],1)])])},a=[],s={name:"Signature",data:function(){return{points:[],imgBase64:"",canvasTxt:null,stage_info:[],startX:0,flag:!0,startY:0,moveY:0,moveX:0,endY:0,endX:0,w:null,h:null,isDown:!1}},created:function(){},mounted:function(){var t=this.$refs.canvasF;t.height=this.$refs.canvasHW.offsetHeight-60,t.width=this.$refs.canvasHW.offsetWidth-10,this.canvasTxt=t.getContext("2d"),this.stage_info=t.getBoundingClientRect()},methods:{backHome:function(){window.history.back()},mouseDown:function(t){if(t=t||event,t.preventDefault(),t){var e={x:t.offsetX,y:t.offsetY};this.startX=e.x,this.startY=e.y,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(e.x,e.y),this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(e),this.isDown=!0}},touchStart:function(t){if(t=t||event,t.preventDefault(),1==t.touches.length){var e={x:t.targetTouches[0].clientX-this.stage_info.left,y:t.targetTouches[0].clientY-this.stage_info.top};this.startX=e.x,this.startY=e.y,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(e.x,e.y),this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(e)}},mouseMove:function(t){if(t=t||event,t.preventDefault(),this.isDown){var e={x:t.offsetX,y:t.offsetY};this.moveY=e.y,this.moveX=e.x,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(e.x,e.y),this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.startY=e.y,this.startX=e.x,this.points.push(e)}},touchMove:function(t){if(t=t||event,t.preventDefault(),1==t.touches.length){var e={x:t.targetTouches[0].clientX-this.stage_info.left,y:t.targetTouches[0].clientY-this.stage_info.top};this.moveY=e.y,this.moveX=e.x,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(e.x,e.y),this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.startY=e.y,this.startX=e.x,this.points.push(e)}},mouseUp:function(t){t=t||event,t.preventDefault();var e={x:t.offsetX,y:t.offsetY};this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(e.x,e.y),this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(e),this.points.push({x:-1,y:-1}),this.isDown=!1},touchEnd:function(t){if(t=t||event,t.preventDefault(),1==t.touches.length){var e={x:t.targetTouches[0].clientX-this.stage_info.left,y:t.targetTouches[0].clientY-this.stage_info.top};this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(e.x,e.y),this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(e),this.points.push({x:-1,y:-1})}},overwrite:function(){this.canvasTxt.clearRect(0,0,this.$refs.canvasF.width,this.$refs.canvasF.height),this.points=[]},send:function(){var t=this.$refs.canvasF;this.points.length>0?this.imgBase64=t.toDataURL():this.imgBase64="",this.$emit("cancel"),this.$emit("imgData",this.imgBase64)},cancel:function(){this.$emit("cancel")}}},o=s,c=(i("2dcb"),i("2877")),r=Object(c["a"])(o,n,a,!1,null,null,null);e["a"]=r.exports},d850:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row-canvas"},[i("canvas",{ref:"ppCanvas",attrs:{id:"ppCanvas",width:"600",height:"375"}}),t._v(" "),i("div",{staticClass:"shutdown"})]),t._v(" "),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.clearInk}},[t._v("清除")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.encode}},[t._v("保存")]),t._v(" "),i("el-button",{on:{click:t.encode}},[t._v("取消")])],1)])},a=[],s=(i("ac6a"),i("bc3a")),o=i.n(s),c=!1,r={data:function(){return{canvasTxt:null,IsInit:!1,imgBase64:"",stage_info:[],context:"",apiUrl:"http://localhost:8089/PPSignSDK/"}},mounted:function(){this.initCanvas()},methods:{initCanvas:function(){var t=document.getElementById("ppCanvas");this.context=t.getContext("2d")},initDevice:function(){var t=this,e=this.apiUrl+"InitialDevice?id=2&width=580&height=380";o.a.get(e).then(function(e){!0===e.data?(c=!0,t.IsInit=!0,t.getInk(),t.getStatus()):t.$message.error("未检测到设备!")})},getInk:function(){var t=this;(function e(){var i=setTimeout(function(){clearTimeout(i),c&&o.a.get("http://localhost:8089/PPSignSDK/GetInks").then(function(i){var n=JSON.parse(i.data);n.forEach(function(e){0===e.EventType&&t.drawImages(e.Image)}),c&&e()}).catch(function(){c&&e()})},50)})()},getStatus:function(){var t=this;(function e(){var i=setTimeout(function(){clearTimeout(i),c&&o.a.get("http://localhost:8089/PPSignSDK/GetDeviceConfirmOrCancelKeyStatus").then(function(i){"1"==i.data||"0"==i.data&&t.clearInk(),c&&e()}).catch(function(){c&&e()})},500)})()},encode:function(){var t=this;o.a.get("http://localhost:8089/PPSignSDK/Encode?type=3").then(function(e){var i="data:image/png;base64,";t.imgBase64=i+e.data,t.$emit("cancel"),t.$emit("imgData",t.imgBase64)})},clearInk:function(){o.a.get("http://localhost:8089/PPSignSDK/Clear").then(function(t){var e=document.getElementById("ppCanvas"),i=e.getContext("2d");i.clearRect(0,0,e.width,e.height)})},uninitDevice:function(){var t=this;c=!1,o.a.get("http://localhost:8089/PPSignSDK/UninitialDevice?id=2").then(function(e){if(!0===e.data){var i=document.getElementById("ppCanvas"),n=i.getContext("2d");n.clearRect(0,0,i.width,i.height),t.IsInit=!1}})},drawImages:function(t){var e="data:image/png;base64,";e+=t;var i=new Image,n=document.getElementById("ppCanvas"),a=n.getContext("2d");i.addEventListener("load",function(){a.drawImage(this,0,0,n.width,n.height)},!1),i.src=e},cancel:function(){this.$emit("cancel")}}},l=r,u=i("2877"),h=Object(u["a"])(l,n,a,!1,null,null,null);e["a"]=h.exports},e498:function(t,e,i){"use strict";var n=i("7456"),a=i.n(n);a.a}}]);
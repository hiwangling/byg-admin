(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18e40ff7"],{"0237":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAkCAYAAAD7PHgWAAABtElEQVRYR+2YMUjdUBiFz0lMqQVp0lKcBYOu7WodanfXFtGhVBB8Ct3chFJwczOpDylIwUUQCh1chAoubxMdTd2KiJRkeEhbJfmL7fLU51Pvnzd573rvd87Jyc8dLtFi+R+TpyzwDpTXBO+1Onu7PakLuAvBNomVdDKsXcWz6UZVvCD/vkxg5HbGpqdlLe30RvGm5/dFhaYBgyiJSEya2plwIljJKuHotQG7Fn487uCvIxKOiZGGOXWLJ/WJvp+NGpcaDKL952SxpTEyZUUwnFXCry0DPlzYf+k6xYapiYor8CqdClfPB1wV1z9KBuDy3y91BM8AzKuMTGHB+8LB5hlOcfPM7anRj5MlBxg31WwnJ8A6g3jvT7l3XLmR+ShOpFzJctVsQG2ftkHboLYBLW9n0DaobUDL2xm0DWob0PJ2Bm2D2ga0vJ3BO9BglByC6NZ+aTt4ERQM4uQzgbF2GGg1RfCNqB48CPLjaQo6zwSFMkRwUCtuwgtkh8Iv/3Pg5MRzPzV53dqbILloYqBmhB/SSu9so87lB8yqeH6ezDjgCwFctenNBASCWnY/n8Pb/noj8hfsJqsAJCxBmgAAAABJRU5ErkJggg=="},"09f4":function(t,e,a){"use strict";a.d(e,"a",function(){return o}),Math.easeInOutQuad=function(t,e,a,r){return t/=r/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function n(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(t,e,a){var o=i(),l=t-o,s=20,c=0;e="undefined"===typeof e?500:e;var d=function t(){c+=s;var i=Math.easeInOutQuad(c,o,l,e);n(i),c<e?r(t):a&&"function"===typeof a&&a()};d()}},"0fea":function(t,e,a){"use strict";a.d(e,"U",function(){return n}),a.d(e,"x",function(){return i}),a.d(e,"F",function(){return o}),a.d(e,"G",function(){return l}),a.d(e,"w",function(){return s}),a.d(e,"D",function(){return c}),a.d(e,"y",function(){return d}),a.d(e,"R",function(){return u}),a.d(e,"W",function(){return m}),a.d(e,"b",function(){return p}),a.d(e,"T",function(){return f}),a.d(e,"h",function(){return v}),a.d(e,"E",function(){return h}),a.d(e,"z",function(){return b}),a.d(e,"fb",function(){return _}),a.d(e,"V",function(){return g}),a.d(e,"a",function(){return y}),a.d(e,"C",function(){return k}),a.d(e,"v",function(){return F}),a.d(e,"S",function(){return x}),a.d(e,"eb",function(){return w}),a.d(e,"hb",function(){return j}),a.d(e,"ab",function(){return O}),a.d(e,"s",function(){return S}),a.d(e,"o",function(){return C}),a.d(e,"q",function(){return $}),a.d(e,"t",function(){return A}),a.d(e,"u",function(){return V}),a.d(e,"r",function(){return D}),a.d(e,"n",function(){return B}),a.d(e,"O",function(){return M}),a.d(e,"N",function(){return z}),a.d(e,"P",function(){return L}),a.d(e,"Q",function(){return Q}),a.d(e,"m",function(){return E}),a.d(e,"cb",function(){return I}),a.d(e,"bb",function(){return T}),a.d(e,"A",function(){return Y}),a.d(e,"B",function(){return N}),a.d(e,"j",function(){return U}),a.d(e,"k",function(){return J}),a.d(e,"l",function(){return G}),a.d(e,"M",function(){return R}),a.d(e,"L",function(){return H}),a.d(e,"K",function(){return P}),a.d(e,"X",function(){return q}),a.d(e,"Z",function(){return W}),a.d(e,"db",function(){return K}),a.d(e,"c",function(){return Z}),a.d(e,"i",function(){return X}),a.d(e,"d",function(){return tt}),a.d(e,"e",function(){return et}),a.d(e,"g",function(){return at}),a.d(e,"f",function(){return rt}),a.d(e,"p",function(){return nt}),a.d(e,"I",function(){return it}),a.d(e,"J",function(){return ot}),a.d(e,"H",function(){return lt}),a.d(e,"Y",function(){return st}),a.d(e,"gb",function(){return ct});var r=a("b775");function n(t){return Object(r["a"])({url:"/carsend/list",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/carsend/add",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/carsend/edit",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/carsend/driveredit",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/carsend/common",method:"get",params:t})}function c(t){return Object(r["a"])({url:"/carsend/editinfo",method:"get",params:t})}function d(t){return Object(r["a"])({url:"/carsend/del",method:"get",params:t})}function u(t){return Object(r["a"])({url:"/obituary/common",method:"get",params:t})}function m(t){return Object(r["a"])({url:"/obituary/list",method:"post",data:t})}function p(t){return Object(r["a"])({url:"/obituary/add",method:"post",data:t})}function f(t){return Object(r["a"])({url:"/obituary/info",method:"get",params:t})}function v(t){return Object(r["a"])({url:"/cabinet/info",method:"get",params:t})}function h(t){return Object(r["a"])({url:"/obituary/edit",method:"post",data:t})}function b(t){return Object(r["a"])({url:"/obituary/del",method:"get",params:t})}function _(t){return Object(r["a"])({url:"/obituary/sign",method:"post",data:t})}function g(t){return Object(r["a"])({url:"/cremation/list",method:"post",data:t})}function y(t){return Object(r["a"])({url:"/cremation/add",method:"post",data:t})}function k(t){return Object(r["a"])({url:"/cremation/edit",method:"post",data:t})}function F(t){return Object(r["a"])({url:"/cremation/common",method:"get",params:t})}function x(t){return Object(r["a"])({url:"/cremation/info",method:"get",params:t})}function w(t){return Object(r["a"])({url:"/cremation/sign",method:"post",data:t})}function j(t){return Object(r["a"])({url:"/cremation/state",method:"post",data:t})}function O(t){return Object(r["a"])({url:"/cremation/send",method:"post",data:t})}function S(t){return Object(r["a"])({url:"/check/list",method:"post",data:t})}function C(t){return Object(r["a"])({url:"/check/add",method:"post",data:t})}function $(t){return Object(r["a"])({url:"/check/edit",method:"post",data:t})}function A(t){return Object(r["a"])({url:"/check/renew",method:"post",data:t})}function V(t){return Object(r["a"])({url:"/check/take",method:"post",data:t})}function D(t){return Object(r["a"])({url:"/check/details",method:"get",params:t})}function B(t){return Object(r["a"])({url:"/check/sign",method:"post",data:t})}function M(t){return Object(r["a"])({url:"/finance/list",method:"post",data:t})}function z(t){return Object(r["a"])({url:"/finance/info",method:"get",params:t})}function L(t){return Object(r["a"])({url:"/finance/pay",method:"post",data:t})}function Q(t){return Object(r["a"])({url:"/finance/check",method:"post",data:t})}function E(t){return Object(r["a"])({url:"/finance/checkCommon",method:"post",data:t})}function I(t){return Object(r["a"])({url:"/finance/services",method:"post",data:t})}function T(t){return Object(r["a"])({url:"/finance/servicesAdd",method:"post",data:t})}function Y(t){return Object(r["a"])({url:"/finance/derateAdd",method:"post",data:t})}function N(t){return Object(r["a"])({url:"/finance/derateCommon",method:"post",data:t})}function U(t){return Object(r["a"])({url:"/finance/carsendEdit",method:"post",data:t})}function J(t){return Object(r["a"])({url:"/finance/carsendSerEdit",method:"post",data:t})}function G(t){return Object(r["a"])({url:"/carsend/again",method:"post",data:t})}function R(t){return Object(r["a"])({url:"/financeDerate/list",method:"post",data:t})}function H(t){return Object(r["a"])({url:"/financeDerate/edit",method:"post",data:t})}function P(t){return Object(r["a"])({url:"/financeDerate/del",method:"get",params:t})}function q(t){return Object(r["a"])({url:"/obituary/state",method:"post",data:t})}function W(t){return Object(r["a"])({url:"/cremation/printinfo",method:"get",params:t})}function K(t){return Object(r["a"])({url:"/services/sign",method:"post",data:t})}function Z(t){return Object(r["a"])({url:"/mourn/business",method:"get",params:t})}function X(t){return Object(r["a"])({url:"/canteen/pay",method:"post",data:t})}function tt(t){return Object(r["a"])({url:"/cabinet/list",method:"post",data:t})}function et(t){return Object(r["a"])({url:"/cabinet/add",method:"post",data:t})}function at(t){return Object(r["a"])({url:"/cabinet/edit",method:"post",data:t})}function rt(t){return Object(r["a"])({url:"/cabinet/del",method:"get",params:t})}function nt(t){return Object(r["a"])({url:"/check/del",method:"get",params:t})}function it(t){return Object(r["a"])({url:"/financeBrt/info",method:"get",params:t})}function ot(t){return Object(r["a"])({url:"/financeBrt/list",method:"post",data:t})}function lt(t){return Object(r["a"])({url:"/financeBrt/add",method:"post",data:t})}function st(t){return Object(r["a"])({url:"/finance/postPay",method:"post",data:t})}function ct(t){return Object(r["a"])({url:"/finance/smzfprint",method:"get",params:t})}},"302d":function(t,e,a){"use strict";var r=a("cd07"),n=a.n(r);n.a},4745:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入关键字"},model:{value:t.listQuery.search_data,callback:function(e){t.$set(t.listQuery,"search_data",e)},expression:"listQuery.search_data"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("查找")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("添加")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"正在查询中。。。",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"业务编号",prop:"serial",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"逝者姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"联系人",prop:"linkman"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"联系电话",prop:"linkphone"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"火化时间",prop:"farewelltime",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"悼念厅",prop:"mourn_title"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作人",prop:"operator"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"办理时间",prop:"create_time",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",prop:"state",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t._f("carFilter")(e.row.state)}},[t._v(" "+t._s(t._f("obituary_list")(e.row.state)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","class-name":"small-padding",width:"320"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.handleUpdates(e.row)}}},[t._v("出车")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.handleInfo(e.row)}}},[t._v("详情")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{rules:t.rules,inline:!0,model:t.dataForm,"status-icon":"","label-position":"left","label-width":"100px"}},[a("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"info"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getCard(0)}}},[t._v("逝者信息")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.getCard(1)}}},[t._v("联系人信息")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.resetForm}},[t._v("清空信息")])],1),t._v(" "),a("el-form-item",{attrs:{label:"逝者姓名",prop:"name"}},[a("el-input",{model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"逝者性别",prop:"sex"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"185px"},attrs:{placeholder:"选择性别",clearable:""},model:{value:t.dataForm.sex,callback:function(e){t.$set(t.dataForm,"sex",e)},expression:"dataForm.sex"}},t._l(t.sex,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"逝者年龄",prop:"age"}},[a("el-input",{model:{value:t.dataForm.age,callback:function(e){t.$set(t.dataForm,"age",e)},expression:"dataForm.age"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"身份证",prop:"card"}},[a("el-input",{model:{value:t.dataForm.card,callback:function(e){t.$set(t.dataForm,"card",e)},expression:"dataForm.card"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"户口所在地",prop:"registered"}},[a("el-input",{model:{value:t.dataForm.registered,callback:function(e){t.$set(t.dataForm,"registered",e)},expression:"dataForm.registered"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-date-picker",{staticStyle:{width:"185px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.dataForm.birthday,callback:function(e){t.$set(t.dataForm,"birthday",e)},expression:"dataForm.birthday"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"民族",prop:"nation"}},[a("el-input",{model:{value:t.dataForm.nation,callback:function(e){t.$set(t.dataForm,"nation",e)},expression:"dataForm.nation"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否低保户",prop:"basic"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"185px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.dataForm.basic,callback:function(e){t.$set(t.dataForm,"basic",e)},expression:"dataForm.basic"}},t._l(t.basic,function(t,e,r){return a("el-option",{key:r,attrs:{label:t,value:e+1}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"是否寄存",prop:"ifcheck"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"185px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.dataForm.ifcheck,callback:function(e){t.$set(t.dataForm,"ifcheck",e)},expression:"dataForm.ifcheck"}},[a("el-option",{attrs:{label:"是",value:1}}),t._v(" "),a("el-option",{attrs:{label:"否",value:2}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"死亡原因",prop:"reason"}},[a("el-input",{model:{value:t.dataForm.reason,callback:function(e){t.$set(t.dataForm,"reason",e)},expression:"dataForm.reason"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"死亡时间",prop:"dietime"}},[a("el-date-picker",{staticStyle:{width:"185px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.dataForm.dietime,callback:function(e){t.$set(t.dataForm,"dietime",e)},expression:"dataForm.dietime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否无名尸",prop:"unknown"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"185px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.dataForm.unknown,callback:function(e){t.$set(t.dataForm,"unknown",e)},expression:"dataForm.unknown"}},t._l(t.unknown,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"馆内馆外",prop:"nature"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"185px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.dataForm.nature,callback:function(e){t.$set(t.dataForm,"nature",e)},expression:"dataForm.nature"}},[a("el-option",{attrs:{label:"悼念厅",value:1}}),t._v(" "),a("el-option",{attrs:{label:"馆外",value:2}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"乡镇",prop:"village"}},[a("el-cascader",{staticStyle:{width:"185px"},attrs:{clearable:"",options:t.options},on:{change:t.handleChange},model:{value:t.village,callback:function(e){t.village=e},expression:"village"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人",prop:"linkman"}},[a("el-input",{model:{value:t.dataForm.linkman,callback:function(e){t.$set(t.dataForm,"linkman",e)},expression:"dataForm.linkman"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人性别",prop:"linksex"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"185px"},attrs:{placeholder:"选择性别",clearable:""},model:{value:t.dataForm.linksex,callback:function(e){t.$set(t.dataForm,"linksex",e)},expression:"dataForm.linksex"}},t._l(t.sex,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人电话",prop:"linkphone"}},[a("el-input",{model:{value:t.dataForm.linkphone,callback:function(e){t.$set(t.dataForm,"linkphone",e)},expression:"dataForm.linkphone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系身份证",prop:"linkcard"}},[a("el-input",{model:{value:t.dataForm.linkcard,callback:function(e){t.$set(t.dataForm,"linkcard",e)},expression:"dataForm.linkcard"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人地址",prop:"linkaddress"}},[a("el-input",{model:{value:t.dataForm.linkaddress,callback:function(e){t.$set(t.dataForm,"linkaddress",e)},expression:"dataForm.linkaddress"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"逝者关系",prop:"relation"}},[a("el-input",{model:{value:t.dataForm.relation,callback:function(e){t.$set(t.dataForm,"relation",e)},expression:"dataForm.relation"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"火化时间",prop:"farewelltime"}},[a("el-date-picker",{staticStyle:{width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择火化时间"},model:{value:t.dataForm.farewelltime,callback:function(e){t.$set(t.dataForm,"farewelltime",e)},expression:"dataForm.farewelltime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2},model:{value:t.dataForm.remark,callback:function(e){t.$set(t.dataForm,"remark",e)},expression:"dataForm.remark"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"灵堂服务",name:"second"}},[a("el-form-item",{attrs:{label:"开始时间",prop:"mourn_data_startime"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:t.mourn_data.startime,callback:function(e){t.$set(t.mourn_data,"startime",e)},expression:"mourn_data.startime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"mourn_data_endtime"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:t.mourn_data.endtime,callback:function(e){t.$set(t.mourn_data,"endtime",e)},expression:"mourn_data.endtime"}}),t._v(" "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.day))])],1),t._v(" "),a("el-form-item",{attrs:{label:"小时"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"小时"},on:{focus:t.countimer},model:{value:t.mourn_data.hours,callback:function(e){t.$set(t.mourn_data,"hours",e)},expression:"mourn_data.hours"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择灵堂",prop:"mourn_data_title"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择灵堂",clearable:""},on:{focus:function(e){return t.Show(1)}},model:{value:t.mourn_data.list.title,callback:function(e){t.$set(t.mourn_data.list,"title",e)},expression:"mourn_data.list.title"}}),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.mourn_data.list.price)+"元")])],1),t._v(" "),a("el-form-item",{attrs:{label:"合计"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"合计"},on:{focus:t.total_count},model:{value:t.mourn_data.totalprice,callback:function(e){t.$set(t.mourn_data,"totalprice",e)},expression:"mourn_data.totalprice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.mourn_data.remark,callback:function(e){t.$set(t.mourn_data,"remark",e)},expression:"mourn_data.remark"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"冷柜服务",name:"third"}},[a("el-form-item",{attrs:{label:"开始时间",prop:"cold_data_startime"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:t.cold_data.startime,callback:function(e){t.$set(t.cold_data,"startime",e)},expression:"cold_data.startime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"outtime"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:t.cold_data.endtime,callback:function(e){t.$set(t.cold_data,"endtime",e)},expression:"cold_data.endtime"}}),t._v(" "),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.days))])],1),t._v(" "),a("el-form-item",{attrs:{label:"小时"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"小时"},on:{focus:t.countimers},model:{value:t.cold_data.hours,callback:function(e){t.$set(t.cold_data,"hours",e)},expression:"cold_data.hours"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择冷柜",prop:"cold_data_title"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请选择冷柜"},on:{focus:function(e){return t.Show(2)}},model:{value:t.cold_data.list.title,callback:function(e){t.$set(t.cold_data.list,"title",e)},expression:"cold_data.list.title"}}),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.cold_data.list.price)+"元")])],1),t._v(" "),a("el-form-item",{attrs:{label:"合计"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"合计"},on:{focus:t.total_counts},model:{value:t.cold_data.totalprice,callback:function(e){t.$set(t.cold_data,"totalprice",e)},expression:"cold_data.totalprice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.cold_data.remark,callback:function(e){t.$set(t.cold_data,"remark",e)},expression:"cold_data.remark"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"选择服务",name:"thr"}},[a("service",{ref:"server",on:{service_data:t.service_data}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("确定")]):a("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.textMap[t.dialogStatus],visible:t.dialogFormVisiblecar},on:{"update:visible":function(e){t.dialogFormVisiblecar=e}}},[a("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"info"}},[a("el-form",{ref:"recar",attrs:{rules:t.rules,inline:!0,model:t.recar,"status-icon":"","label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"逝者姓名",prop:"name"}},[a("el-input",{model:{value:t.recar.name,callback:function(e){t.$set(t.recar,"name",e)},expression:"recar.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"接运地址",prop:"address"}},[a("el-input",{model:{value:t.recar.address,callback:function(e){t.$set(t.recar,"address",e)},expression:"recar.address"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"出车时间",prop:"outtime"}},[a("el-date-picker",{staticStyle:{width:"185px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.recar.outtime,callback:function(e){t.$set(t.recar,"outtime",e)},expression:"recar.outtime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人",prop:"linkman"}},[a("el-input",{model:{value:t.recar.linkman,callback:function(e){t.$set(t.recar,"linkman",e)},expression:"recar.linkman"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"linkphone"}},[a("el-input",{model:{value:t.recar.linkphone,callback:function(e){t.$set(t.recar,"linkphone",e)},expression:"recar.linkphone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"接运类型",prop:"recetype"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"185px"},attrs:{placeholder:"",clearable:""},model:{value:t.recar.recetype,callback:function(e){t.$set(t.recar,"recetype",e)},expression:"recar.recetype"}},t._l(t.recetype,function(t,e,r){return a("el-option",{key:r,attrs:{label:t,value:Number(e)}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"选择司机",prop:"driver"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"185px"},attrs:{placeholder:"",clearable:""},model:{value:t.recar.driver,callback:function(e){t.$set(t.recar,"driver",e)},expression:"recar.driver"}},t._l(t.getservice,function(t,e,r){return a("el-option",{key:r,attrs:{label:t.realname,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2},model:{value:t.recar.remark,callback:function(e){t.$set(t.recar,"remark",e)},expression:"recar.remark"}})],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"选择服务",name:"second"}},[a("service",{ref:"server",on:{service_data:t.service_data}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisiblecar=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateDatas}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"查看",visible:t.dialogFormVisibleInfo},on:{"update:visible":function(e){t.dialogFormVisibleInfo=e}}},[a("div",{staticClass:"bury_car"},[a("h1",{staticClass:"bury_car_h1"},[t._v("逝者信息")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v(" 逝者姓名 : ")]),t._v(t._s(t.infodataForm.name))]),t._v(" "),a("p",[a("span",[t._v(" 身份证 : ")]),t._v(t._s(t.infodataForm.card))]),t._v(" "),a("p",[a("span",[t._v(" 死亡原因 : ")]),t._v(t._s(t.infodataForm.reason))]),t._v(" "),a("p",[a("span",[t._v(" 联系人 : ")]),t._v(t._s(t.infodataForm.linkman))]),t._v(" "),a("p",[a("span",[t._v(" 火化时间 : ")]),t._v(t._s(t.infodataForm.farewelltime))])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v(" 逝者性别 : ")]),t._v(t._s(t.infodataForm.sex))]),t._v(" "),a("p",[a("span",[t._v(" 户口所在地 : ")]),t._v(t._s(t.infodataForm.registered))]),t._v(" "),a("p",[a("span",[t._v(" 联系人性别 : ")]),t._v(t._s(t.infodataForm.linksex))]),t._v(" "),a("p",[a("span",[t._v(" 联系电话 : ")]),t._v(t._s(t.infodataForm.linkphone))])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v(" 逝者年龄 : ")]),t._v(t._s(t.infodataForm.age))]),t._v(" "),a("p",[a("span",[t._v(" 民族 : ")]),t._v(t._s(t.infodataForm.nation))]),t._v(" "),a("p",[a("span",[t._v(" 承办人 : ")]),t._v(t._s(t.infodataForm.operator))]),t._v(" "),a("p",[a("span",[t._v(" 逝者关系 : ")]),t._v(t._s(t.infodataForm.relation))])])])],1)],1),t._v(" "),t.InfoServer&&t.InfoServer.length>0?a("div",{staticClass:"bury_car",staticStyle:{border:"1px solid #23C6C8","margin-top":"10px"}},[a("h1",{staticClass:"bury_car_h1",staticStyle:{background:"#23C6C8",color:"#fff"}},[t._v("所选服务")]),t._v(" "),a("el-row",{attrs:{gutter:20}},t._l(t.InfoServer,function(e,r){return a("div",{key:r},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v(" 服务名称 : ")]),t._v(t._s(e.title)),a("span",{directives:[{name:"show",rawName:"v-show",value:e.state>1,expression:"item.state > 1"}]},[t._v("(已签收)")])])])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v(" 数量 : ")]),t._v(t._s(e.number))])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v(" 合计 : ")]),t._v(t._s(e.totalprice))])])])],1)}),0)],1):t._e(),t._v(" "),t.infodataForm.cold?a("div",{staticClass:"bury_car",staticStyle:{border:"1px solid #63afde","margin-top":"10px"}},[a("h1",{staticClass:"bury_car_h1",staticStyle:{background:"#63afde",color:"#fff"}},[t._v("冷藏柜")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v("冷藏柜名称 : ")]),t._v(t._s(t.infodataForm.cold.title))])])]),t._v(" "),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v("开始时间 : ")]),t._v(t._s(t.infodataForm.cold.startime))])])]),t._v(" "),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v("结束时间 : ")]),t._v(t._s(t.infodataForm.cold.endtime))])])]),t._v(" "),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v("价格合计 : ")]),t._v(t._s(t.infodataForm.cold.totalprice))])])])],1)],1):t._e(),t._v(" "),t.infodataForm.mourn?a("div",{staticClass:"bury_car",staticStyle:{border:"1px solid #74bcffba","margin-top":"10px"}},[a("h1",{staticClass:"bury_car_h1",staticStyle:{background:"#74bcffba",color:"#fff"}},[t._v("悼念厅")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v("悼念厅 : ")]),t._v(t._s(t.infodataForm.mourn.title))]),t._v(" "),a("p",[a("span",[t._v("总价 : ")]),t._v(t._s(t.infodataForm.mourn.totalprice))])])]),t._v(" "),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v("开始 : ")]),t._v(t._s(t.infodataForm.mourn.startime))])])]),t._v(" "),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v("结束 : ")]),t._v(t._s(t.infodataForm.mourn.endtime))])])]),t._v(" "),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content"},[a("p",[a("span",[t._v("小时 : ")]),t._v(t._s(t.infodataForm.mourn.hours))])])])],1)],1):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticStyle:{color:"red","font-size":"14px","margin-right":"10px","font-weight":"800"}},[t._v("总价："),a("b",[t._v(t._s(null==t.totalprice?0:t.totalprice))]),t._v(" 元")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogFormVisibleInfo=!1}}},[t._v("取消")])],1)]),t._v(" "),a("box",{ref:"box",on:{box_data:t.box_data}})],1)},n=[],i=(a("ac6a"),a("7f7f"),a("0fea")),o=a("bc3a"),l=a.n(o),s=a("fbb8"),c=a("333d"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"close-on-click-modal":!1,title:1==t.type?"选择灵堂":"选择冷藏柜",visible:t.dialogFormVisible,"append-to-body":""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("div",{staticClass:"box-title"},[t._l(t.box,function(e,r){return a("div",{key:r,staticClass:"box-img"},[a("img",{attrs:{src:e.img,alt:"",width:"20"}}),t._v(" "),a("span",[t._v(t._s(e.title))])])}),t._v(" "),a("div",{staticClass:"box-select"},[t._v("\n      "+t._s(t.select_data.title)+"\n      "),a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.select_data.price)+t._s(t.select_data.unit))])])],2),t._v(" "),a("div",{staticClass:"box-conent"},[a("h1",[t._v(t._s(1==t.type?"灵堂":"冷藏柜"))]),t._v(" "),a("div",{staticClass:"box-main"},[a("el-row",{attrs:{gutter:20}},t._l(t.list,function(e,r){return a("el-col",{key:r,attrs:{span:4}},[a("div",{staticClass:"grid-content"},[a("img",{attrs:{src:0==e.state?t.box[0].img:t.box[1].img,alt:"",width:"30"}}),t._v(" "),a("p",[a("el-radio",{attrs:{label:e.id,disabled:0!=e.state},on:{change:t.changeData},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(e.title))])],1)])])}),1)],1)]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.SendData}},[t._v("确定")])],1)])},u=[],m={data:function(){return{dialogFormVisible:!1,radio:"",select_data:"",type:"",list:null,box:[{img:a("0237"),title:"空闲",state:0},{img:a("c2f0"),title:"占用",state:1}],dataFrom:{}}},computed:{},created:function(){},methods:{show:function(t){this.list=t.list,this.type=t.type,this.select_data="",this.radio="",this.dialogFormVisible=!0},changeData:function(t){var e=this;this.list.forEach(function(a){a.id==t&&(e.select_data=a)})},SendData:function(){var t={type:this.type,data:this.select_data};this.$emit("box_data",t),this.dialogFormVisible=!1}}},p=m,f=(a("f48b"),a("2877")),v=Object(f["a"])(p,d,u,!1,null,null,null),h=v.exports,b=a("6fa7"),_=a("d359"),g=a("d850"),y=a("ac0d"),k={name:"VueGarden",components:{Pagination:c["a"],box:h,service:b["a"],sign:_["a"],e560:g["a"]},mixins:[y["a"]],data:function(){var t=this,e=function(e,a,r){void 0!=t.mourn_data.list.title&&null==t.mourn_data.startime&&null==t.mourn_data.startime?r(new Error("请选择灵堂开始时间")):r()},a=function(e,a,r){void 0!=t.cold_data.list.title&&null==t.cold_data.startime&&null==t.cold_data.startime?r(new Error("请选择冷柜开始时间")):r()};return{list:null,flag:!0,day:"",days:"",totalprice:"",EditServer:null,InfoServer:null,recetype:null,signatureid:"",record_sign:"",getservice:null,record_ifsign:"",mourn:null,cold:null,server:null,infodataForm:{name:"",sex:"",age:"",card:"",farewelltime:null,registered:"",reason:"",linkman:"",relation:"",linksex:"",nation:"",linkphone:"",operator:""},mourn_data:{startime:null,endtime:null,remark:"",hours:null,totalprice:"",list:{title:""}},cold_data:{startime:null,endtime:null,totalprice:"",hours:null,remark:"",list:{title:""}},activeName:"info",total:0,listLoading:!0,listQuery:{page:1,limit:20,search_data:"",sort:"add_time",order:"desc"},sex:["男","女"],unknown:[{id:0,name:"否"},{id:1,name:"是"}],dataForm:{name:"",sex:"",age:"",card:"",town:"",village:"",unknown:"",linkaddress:"",basic:"",nature:1,dietime:null,farewelltime:null,registered:"",birthday:null,remark:"",reason:"",linkman:"",relation:"",linksex:"",linkcard:"",ifcheck:2,nation:"汉",linkphone:"",operator:"",mourn:{},cold:{},server:null,type:0},recar:{id:"",name:"",sex:"",age:"",address:"",recetype:1,outtime:null,linkman:"",totalprice:0,linkphone:"",driver:"",cid:"",oid:null,operator:"",remark:"",server:null},village:"",dialogFormVisible:!1,dialogFormVisibleInfo:!1,dialogFormVisiblecar:!1,dialogFormVisibleSign:!1,dialogFormSign:!1,dialogStatus:"",textMap:{update:"编辑",create:"创建",updates:"再次出车"},options:[],rules:{mourn_data_startime:[{type:"date",validator:e,trigger:"change"}],cold_data_startime:[{type:"date",validator:a,trigger:"change"}]}}},computed:{},watch:{"mourn_data.list.title":{deep:!0,handler:function(t,e){""==t&&(this.mourn_data.list="",this.mourn_data.totalprice="")}},"cold_data.list.title":{deep:!0,handler:function(t,e){""==t&&(this.cold_data.list="",this.cold_data.totalprice="")}}},created:function(){var t=this;this.getList();var e={branch:2};Object(s["a"])(e).then(function(e){t.getservice=e.data,t.$forceUpdate()})},methods:{getList:function(){var t=this;this.listLoading=!0,Object(i["W"])(this.listQuery).then(function(e){t.list=e.data.data,t.total=e.data.total||0,t.soket(),t.soket2(),t.soket4(),t.soket5(),t.listLoading=!1,Object(s["d"])().then(function(e){t.options=e.data})}).catch(function(){t.list=[],t.total=0,t.listLoading=!1})},soket:function(){var t=new URLSearchParams;t.append("id",1),t.append("type","publish"),t.append("content",""),l()({method:"post",url:"http://byg.jiayubz.net/tv.php",data:t})},soket2:function(){var t=new URLSearchParams;t.append("id",2),t.append("type","publish"),t.append("content",""),l()({method:"post",url:"http://byg.jiayubz.net/tv.php",data:t})},soket4:function(){var t=new URLSearchParams;t.append("id",4),t.append("type","publish"),t.append("content",""),l()({method:"post",url:"http://byg.jiayubz.net/tv.php",data:t})},soket5:function(){var t=new URLSearchParams;t.append("id",5),t.append("type","publish"),t.append("content",""),l()({method:"post",url:"http://byg.jiayubz.net/tv.php",data:t})},getCard:function(t){var e=this,a="http://127.0.0.1:38088/card=idcard",r="";l.a.post(a,r).then(function(a){if(0==a.data.code){var r=a.data.IDCardInfo;if(e.$notify.success({title:"成功",message:"身份信息获取成功"}),0==t){e.dataForm.name=r.name,e.dataForm.sex=r.sex,e.dataForm.card=r.cardID,e.dataForm.registered=r.address;var n=[];n[0]=r.birthday.substring(0,4),n[1]=r.birthday.substring(4,6),n[2]=r.birthday.substring(6,8),e.dataForm.birthday=n.join("-");var i=new Date,o=i.getFullYear();e.dataForm.age=parseInt(o)-r.birthday.substr(0,4)}else e.dataForm.linkman=r.name,e.dataForm.linksex=r.sex,e.dataForm.linkcard=r.cardID,e.dataForm.linkaddress=r.address}else e.$notify.error({title:"获取身份信息失败",message:a.msg})}).catch(function(t){e.$notify.error({title:"未检测到系统设备",message:"网络错误"})})},sign_open:function(){var t=this;this.record_sign="",this.dialogFormVisibleSign=!0,this.$nextTick(function(){t.$refs.child.initDevice()})},sign_close:function(){this.$refs.child.uninitDevice()},cancel:function(){this.dialogFormVisibleSign=!1},imgData:function(t){this.record_sign=t},countimer:function(){var t=this.mourn_data.startime,e=new Date(this.mourn_data.endtime),a=e.getTime()-new Date(t).getTime(),r=Math.floor(a/864e5),n=a%864e5,i=Math.floor(n/36e5),o=24*r+i;o<0?(this.$message.error("输入时间有误,请重新输入"),this.mourn_data.hours=null):(this.mourn_data.hours=o,this.day=+r+"天 "+i+"小时")},countimers:function(){var t=this.cold_data.startime,e=new Date(this.cold_data.endtime),a=e.getTime()-new Date(t).getTime(),r=Math.floor(a/864e5),n=a%864e5,i=Math.floor(n/36e5),o=24*r+i;o<0?(this.$message.error("输入时间有误,请重新输入"),this.cold_data.hours=null):(this.cold_data.hours=o,this.days=+r+"天 "+i+"小时")},getCommon:function(t){var e=this;Object(i["R"])().then(function(a){e.mourn=a.data.mourn,e.cold=a.data.cold,e.recetype=a.data.recetype||1,e.server=a.data.services;var r={type:t,server:e.server};e.$refs.server.showService(r)})},box_data:function(t){this.dataForm.type=t.type,1==t.type?this.mourn_data.list=Object.assign({},t.data):this.cold_data.list=Object.assign({},t.data)},total_count:function(){this.mourn_data.totalprice=this.mourn_data.list.price*this.mourn_data.hours},total_counts:function(){this.cold_data.totalprice=this.cold_data.list.price*this.cold_data.hours},SignSend:function(){var t=this,e={signature:this.record_sign,id:this.signatureid};Object(i["fb"])(e).then(function(e){0==e.code?(t.$notify.success({title:"成功",message:"操作成功"}),t.getList(),t.dialogFormVisibleInfo=!1):t.$notify.error({title:"失败",message:e.msg})})},Show:function(t){var e={list:1==t?this.mourn:this.cold,type:t};this.$refs.box.show(e)},service_data:function(t){this.dataForm.server=t,this.recar.server=t},handleFilter:function(){this.listQuery.page=1,this.getList()},resetForm:function(){this.dataForm={name:"",sex:"",age:"",card:"",basic:"",ifcheck:2,remark:"",nature:1,registered:"",dietime:null,town:"",village:"",unknown:0,reason:"",linkman:"",relation:"",linkcard:"",linkphone:"",birthday:null,linkaddress:"",nation:"汉",linksex:"",operator:"",farewelltime:null}},reset:function(){this.mourn_data={startime:null,endtime:null,remark:"",hours:null,totalprice:"",list:{title:""}},this.cold_data={startime:null,endtime:null,totalprice:"",hours:null,remark:"",list:{title:""}}},handleChange:function(t){this.dataForm.town="",this.dataForm.village="",this.dataForm.town=t[0],t[1]&&(this.dataForm.village=t[1])},handleCreate:function(){var t=this;this.resetForm(),this.reset(),this.getCommon(0),this.activeName="info",this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){var e={server:t.server};t.$refs.server.showService(e),t.$refs["dataForm"].clearValidate()})},handleInfo:function(t){var e=this,a={id:t.id,type:2};Object(i["T"])(a).then(function(a){var r=[];a.data.services.forEach(function(t,e){r.push(t.services)}),e.totalprice=a.data.totalprice,e.InfoServer=[].concat.apply([],r),e.infodataForm=a.data,e.signatureid=t.id,e.record_sign=t.signature,e.record_ifsign=t.ifsignature,e.dialogFormVisibleInfo=!0})},createData:function(){var t=this;this.dataForm.operator=this.info.realname,this.dataForm.mourn=this.mourn_data,this.dataForm.cold=this.cold_data,this.$refs["dataForm"].validate(function(e){e&&Object(i["b"])(t.dataForm).then(function(e){t.getList(),t.dialogFormVisible=!1,t.$notify.success({title:"成功",message:"添加成功"})}).catch(function(e){t.$notify.error({title:"失败",message:e.msg})})})},updateDatas:function(){var t=this;this.$refs["recar"].validate(function(e){e&&Object(i["l"])(t.recar).then(function(){t.getList(),t.dialogFormVisiblecar=!1,t.$notify.success({title:"成功",message:"出车成功"})}).catch(function(e){t.$notify.error({title:"失败",message:e.msg})})})},handleUpdates:function(t){var e=this;this.activeName="info",this.recar.oid=t.id,this.recar.name=t.name,this.recar.linkman=t.linkman,this.recar.linkphone=t.linkphone,this.getCommon(1),this.dialogStatus="updates",this.dialogFormVisiblecar=!0,this.$nextTick(function(){e.$refs["recar"].clearValidate()})},handleUpdate:function(t){var e=this;this.activeName="info",this.dataForm=Object.assign({},t);var a=[this.dataForm.town,this.dataForm.village];this.village=a,this.getCommon(1);var r={id:t.id,type:1};Object(i["T"])(r).then(function(t){e.reset(),t.data.mourn&&(e.mourn_data=t.data.mourn),t.data.cold&&(e.cold_data=t.data.cold),e.$refs.server.editService(t.data.services)}),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},updateData:function(){var t=this;this.dataForm.operator=this.info.realname,this.dataForm.mourn=this.mourn_data,this.dataForm.cold=this.cold_data,this.$refs["dataForm"].validate(function(e){e&&Object(i["E"])(t.dataForm).then(function(){t.getList(),t.dialogFormVisible=!1,t.$notify.success({title:"成功",message:"更新成功"})}).catch(function(e){t.$notify.error({title:"失败",message:e.msg})})})},handleDelete:function(t){var e=this;this.$confirm("您确认删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i["z"])(t).then(function(a){var r=e.list.indexOf(t);e.list.splice(r,1),e.$message({type:"success",message:"删除成功!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},F=k,x=(a("302d"),Object(f["a"])(F,r,n,!1,null,null,null));e["default"]=x.exports},7514:function(t,e,a){"use strict";var r=a("5ca1"),n=a("0a49")(5),i="find",o=!0;i in[]&&Array(1)[i](function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(i)},c2f0:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAkCAYAAAD7PHgWAAABqElEQVRYR+2YTyhEURjFz3nzrn9bSZnmlQXGki0W2NuS2CmllJ2dkrKzVEpKykYpZWGjKJvZic2MbDQiyYoNz8z7NEgYBveb2eje7b2/c8477+vVu0SJddpkOnIxTIEYIlhV6uzf9uQOwLEIDv0I6y0Xj6nveH61IYA5SZhVkMN/M7Y7LcBmjReONJ/h/rPClwEzCbMIcsLOzpaS9WT2ceTHgOk46umZa5CerZUtx1zY0HaJm/d8UYMngd8t8A5sTTScID/Qns1vlw4Y9/sl5u1qjBTsYDIbbnwIKEDsNOF35QXPr9QjOoXegsLEGhVgFlG0/5oj33qeSzETmGWAY9aqlQQFO0wH5qG837jyJmYmqJLySpZXzQXU9ukadA1qG9DybgZdg9oGtLybQdegtgEt72bQNahtQMu7Gfz/DaYDc0WwUfukFeFFosKP+xrA0YoYqEVlj5dNqLv1/UmBV1vQo0gfyB61to2AyJGQW8+oRGH1Q26l6HYrHZhxgks2+mpGMJc8D2fe6xQFfLld9adB9oogpjb9hQABEWGK9+F88gaF6+G39QSdypoit++YvAAAAABJRU5ErkJggg=="},cd07:function(t,e,a){},e13f:function(t,e,a){},f48b:function(t,e,a){"use strict";var r=a("e13f"),n=a.n(r);n.a},fbb8:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"c",function(){return i}),a.d(e,"b",function(){return o}),a.d(e,"d",function(){return l});var r=a("b775");function n(t){return Object(r["a"])({url:"/manager/getlist",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/protocol/performanceInfo",method:"get",params:t})}function o(t){return Object(r["a"])({url:"/protocol/performanceAdd",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/village/getlist",method:"get",params:t})}}}]);
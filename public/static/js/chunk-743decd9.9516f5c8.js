(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-743decd9"],{"09f4":function(t,e,i){"use strict";i.d(e,"a",function(){return l}),Math.easeInOutQuad=function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function a(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,i){var l=o(),r=t-l,s=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=s;var o=Math.easeInOutQuad(c,l,r,e);a(o),c<e?n(t):i&&"function"===typeof i&&i()};u()}},"5a09":function(t,e,i){"use strict";var n=i("7bc8"),a=i.n(n);a.a},6645:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:20==t.info.branch||1==t.info.branch,expression:"info.branch == 20 || info.branch ==1"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("添加")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"default-sort":{prop:"sort",order:"ascending"},"element-loading-text":"正在查询中。。。",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"标题",prop:"title"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作人",prop:"operator"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作时间",prop:"create_time",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作","class-name":"small-padding fixed-width",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handledown(n)}}},[t._v("下载")]),t._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:20==t.info.branch||1==t.info.branch,expression:"info.branch == 20 || info.branch ==1"}],attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.handleDelete(n)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),i("el-dialog",{attrs:{"close-on-click-modal":!1,width:"800px",title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"700px","margin-left":"50px"},attrs:{rules:t.rules,model:t.dataForm,"status-icon":"","label-position":"left","label-width":"100px"}},[i("el-form-item",{attrs:{label:"名称",prop:"title"}},[i("el-input",{model:{value:t.dataForm.title,callback:function(e){t.$set(t.dataForm,"title",e)},expression:"dataForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"上传文件"}},[i("el-upload",{staticClass:"upload-demo",attrs:{headers:t.headers,action:t.uploadPath,"on-preview":t.handlePreview,name:t.dataForm.title,"on-remove":t.handleRemove,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,"before-remove":t.beforeRemove,multiple:"",limit:1,"on-exceed":t.handleExceed,"file-list":t.fileList}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"30px"},attrs:{label:"内容",prop:"content"}},[i("Tinymce",{ref:"editor",attrs:{height:400},model:{value:t.dataForm.content,callback:function(e){t.$set(t.dataForm,"content",e)},expression:"dataForm.content"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("确定")]):i("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("确定")])],1)],1)],1)},a=[],o=(i("ac4d"),i("8a81"),i("ac6a"),i("7f7f"),i("b775"));function l(t){return Object(o["a"])({url:"http://gm.jiayubz.net/weixin/v1/institution/list",method:"post",data:t})}function r(t){return Object(o["a"])({url:"http://gm.jiayubz.net/weixin/v1/institution/add",method:"post",data:t})}function s(t){return Object(o["a"])({url:"http://gm.jiayubz.net/weixin/v1/institution/edit",method:"post",data:t})}function c(t){return Object(o["a"])({url:"http://gm.jiayubz.net/weixin/v1/institution/del",method:"get",params:t})}var u=i("91b6"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[i("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),i("div",{staticClass:"editor-custom-btn-container"},[i("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1)])},m=[],h=(i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("\n    upload\n  ")]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("\n        Click upload\n      ")])],1),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("\n      Cancel\n    ")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("\n      Confirm\n    ")])],1)],1)}),f=[],p=(i("456d"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var i=e.uid,n=Object.keys(this.listObj),a=0,o=n.length;a<o;a++)if(this.listObj[n[a]].uid===i)return this.listObj[n[a]].url=t.files.file,void(this.listObj[n[a]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=Object.keys(this.listObj),n=0,a=i.length;n<a;n++)if(this.listObj[i[n]].uid===e)return void delete this.listObj[i[n]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,n=t.uid;return this.listObj[n]={},new Promise(function(a,o){var l=new Image;l.src=i.createObjectURL(t),l.onload=function(){e.listObj[n]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},a(!0)})}}}),b=p,g=(i("fd60"),i("2877")),v=Object(g["a"])(b,h,f,!1,null,"3fefeeec",null),y=v.exports,w=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],_=w,k=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],x=k,j=[];function F(){return window.tinymce}var C=function(t,e){var i=document.getElementById(t),n=e||function(){};if(!i){var a=document.createElement("script");a.src=t,a.id=t,document.body.appendChild(a),j.push(n);var o="onload"in a?l:r;o(a)}function l(e){e.onload=function(){this.onerror=this.onload=null;for(var t=0,i=j;t<i.length;t++){var n=i[t];n(null,e)}j=null},e.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+t),e)}}function r(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e=!0,i=!1,n=void 0;try{for(var a,o=j[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;l(null,t)}}catch(r){i=!0,n=r}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}j=null}}}i&&n&&(F()?n(null,i):j.push(n))},S=C,O="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",$={name:"Tinymce",components:{editorImage:y},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;S(O,function(e){e?t.$message.error(e.message):t.initTinymce()})},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["en"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:x,menubar:this.menubar,plugins:_,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",i.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))})}}},L=$,T=(i("9adc"),Object(g["a"])(L,d,m,!1,null,"c6234f8a",null)),I=T.exports,V=i("5f87"),z=i("333d"),E=i("ac0d"),A={name:"VueArea",components:{Pagination:z["a"],Tinymce:I},mixins:[E["a"]],data:function(){return{uploadPath:u["a"],list:null,total:0,gardens:null,image_url:"",listLoading:!0,listQuery:{page:1,limit:20,keyword:"",sort:"add_time",order:"desc"},dataForm:{title:"",thumb:"",operator:"",content:""},fileList:[],dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"创建"},rules:{}}},computed:{headers:function(){return{token:Object(V["a"])()}}},created:function(){this.getList()},methods:{handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},handleExceed:function(t,e){this.$message.warning("当前限制选择 1个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},beforeRemove:function(t,e){return this.$confirm("确定移除 ".concat(t.name,"？"))},getList:function(){var t=this;this.listLoading=!0,l(this.listQuery).then(function(e){t.list=e.data,t.total=e.data.total||0,t.listLoading=!1}).catch(function(){t.list=[],t.total=0,t.listLoading=!1})},handleFilter:function(){this.listQuery.page=1,this.getList()},resetForm:function(){this.dataForm={title:"",content:""},this.fileList=[]},handleCreate:function(){var t=this;this.resetForm(),this.dialogStatus="create",this.dataForm.operator=this.info.realname,this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},createData:function(){var t=this;this.$refs["dataForm"].validate(function(e){e&&r(t.dataForm).then(function(e){t.getList(),t.dialogFormVisible=!1,t.$notify.success({title:"成功",message:"添加成功"})}).catch(function(e){t.$notify.error({title:"失败",message:e})})})},handleUpdate:function(t){var e=this;this.dataForm=Object.assign({},t),this.fileList=[{name:t.title,url:t.thumb}],this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},updateData:function(){var t=this;this.$refs["dataForm"].validate(function(e){e&&s(t.dataForm).then(function(){var e=!0,i=!1,n=void 0;try{for(var a,o=t.list[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;if(l.id===t.dataForm.id){var r=t.list.indexOf(l);t.list.splice(r,1,t.dataForm);break}}}catch(s){i=!0,n=s}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}t.dialogFormVisible=!1,t.$notify.success({title:"成功",message:"更新成功"})}).catch(function(e){t.$notify.error({title:"失败",message:e})})})},handledown:function(t){console.log(t.thumb);var e=document.createElement("a");e.download=t.title,e.href=t.thumb,e.click()},handleDelete:function(t){var e=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){c(t).then(function(i){e.$notify.success({title:"成功",message:"删除成功"});var n=e.list.indexOf(t);e.list.splice(n,1)}).catch(function(t){e.$notify.error({title:"失败",message:t})})}).catch(function(){e.$message({type:"info",message:"已取消"})})},handleAvatarSuccess:function(t,e){console.log(t),console.log(e);var i="http://byg.jiayubz.net/"+e.response.data;this.dataForm.thumb=i,this.$notify.success({title:"成功",message:"上传成功"})},beforeAvatarUpload:function(t){console.log(t)}}},R=A,N=(i("5a09"),Object(g["a"])(R,n,a,!1,null,null,null));e["default"]=N.exports},"7bc8":function(t,e,i){},"91b6":function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n="http://byg.jiayubz.net/api/v1/upload/upload"},"9adc":function(t,e,i){"use strict";var n=i("fcb3"),a=i.n(n);a.a},dc65:function(t,e,i){},fcb3:function(t,e,i){},fd60:function(t,e,i){"use strict";var n=i("dc65"),a=i.n(n);a.a}}]);